---
title: cd on quit
description: how to make rovr change your shell's directory on quit and export selected files.
---

import { Tabs, TabItem, Code, Aside } from "@astrojs/starlight/components";

rovr can change the current directory to wherever you were when you quit, and export selected files to specified locations.

### how it works

when `cd_on_quit` is enabled, rovr writes the path of its current directory to a file named `rovr_quit_cd_path` in your config directory before exiting.

a script or function in your shell config can read this file, `cd` into the saved directory, and delete the file.

### enabling `cd_on_quit`

set the `cd_on_quit` option to `true` in your `config.toml` file.

<Code code={`[settings]\ncd_on_quit = true`} lang="toml" title="config.toml" />

### shell configuration

add a function to your shell config that wraps the `rovr` command.

<Tabs>
  <TabItem label="Linux">
    <Tabs>
      <TabItem label="bash">
        <Code
          code={`rovr () {\n    command rovr "$@"\n    config_dir="\${XDG_CONFIG_HOME:-$HOME/.config}"\n    cd_path_file="$config_dir/rovr/rovr_quit_cd_path"\n    if [ -f "$cd_path_file" ]; then\n        cd "$(cat \\"$cd_path_file\\")"\n        rm -f "$cd_path_file"\n    fi\n}`}
          lang="bash"
          frame="code"
        />
      </TabItem>
      <TabItem label="fish">
        <Code
          code={`function rovr\n    command rovr $argv\n    set config_dir "$HOME/.config"\n    if set -q XDG_CONFIG_HOME\n        set config_dir "$XDG_CONFIG_HOME"\n    end\n    set cd_path_file "$config_dir/rovr/rovr_quit_cd_path"\n    if test -f "$cd_path_file"\n        cd (cat "$cd_path_file")\n        rm -f "$cd_path_file"\n    end\nend`}
          lang="fish"
          frame="code"
        />
      </TabItem>
      <TabItem label="nushell">
        <Code
          code={`def --env --wrapped rovr [...args: string] {\n    ^rovr ...$args\n    let config_dir = ($env.XDG_CONFIG_HOME? | default ($env.HOME | path join ".config"))\n    let cd_path_file = ($config_dir | path join "rovr" "rovr_quit_cd_path")\n    if ($cd_path_file | path exists) {\n        cd ($cd_path_file | open | str trim)\n        rm $cd_path_file\n    }\n}`}
          lang="nu"
          frame="code"
        />
      </TabItem>
    </Tabs>
  </TabItem>
  <TabItem label="macOS">
    <Tabs>
      <TabItem label="bash">
        <Code
          code={`rovr () {\n    command rovr "$@"\n    cd_path_file="$HOME/Library/Application Support/rovr/rovr_quit_cd_path"\n    if [ -f "$cd_path_file" ]; then\n        cd "$(cat \\"$cd_path_file\\")"\n        rm -f "$cd_path_file"\n    fi\n}`}
          lang="bash"
          frame="code"
        />
      </TabItem>
      <TabItem label="fish">
        <Code
          code={`function rovr\n    command rovr $argv\n    set cd_path_file "$HOME/Library/Application Support/rovr/rovr_quit_cd_path"\n    if test -f "$cd_path_file"\n        cd (cat "$cd_path_file")\n        rm--env  -f "$cd_path_file"\n    end\nend`}
          lang="fish"
          frame="code"
        />
      </TabItem>
      <TabItem label="nushell">
        <Code
          code={`def rovr [...args: string] {\n    ^rovr ...$args\n    let cd_path_file = ($env.HOME | path join "Library" "Application Support" "rovr" "rovr_quit_cd_path")\n    if ($cd_path_file | path exists) {\n        cd ($cd_path_file | open | str trim)\n        rm $cd_path_file\n    }\n}`}
          lang="nu"
          frame="code"
        />
      </TabItem>
    </Tabs>
  </TabItem>
  <TabItem label="Windows">
    <Tabs>
      <TabItem label="powershell">
        <Code
          code={`function rovr {\n    param ( [string[]]$Params )\n    & rovr.exe $Params\n    $cd_path_file = "$env:LOCALAPPDATA\\rovr\\rovr_quit_cd_path"\n    if (Test-Path $cd_path_file) {\n        Set-Location -Path (Get-Content $cd_path_file)\n        Remove-Item $cd_path_file\n    }\n}`}
          lang="powershell"
          frame="code"
        />
        Powershell may prevent you from running such functions, so you may have
        to run
        <Code
          code={`Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope LocalMachine`}
          lang="powershell"
        />
        for it to work. For more information on `Set-ExecutionPolicy`, refer to
        its
        [docs](https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.security/se--env t-executionpolicy)
      </TabItem>
      <TabItem label="nushell">
        <Code
          code={`def rovr [...args: string] {\n    ^rovr.exe ...$args\n    let cd_path_file = ($env.LOCALAPPDATA | path join "rovr" "rovr_quit_cd_path")\n    if ($cd_path_file | path exists) {\n        cd ($cd_path_file | open | str trim)\n        rm $cd_path_file\n    }\n}`}
          lang="nu"
          frame="code"
        />
      </TabItem>
    </Tabs>
  </TabItem>
</Tabs>

<Aside type="note">
  rovr uses platform-specific config directories: `~/.config/rovr` on Linux,
  `~/Library/Application Support/rovr` on macOS, and `%LOCALAPPDATA%\rovr` on
  Windows. the examples above should work for most setups, but you may need to
  adjust paths based on your specific installation.
</Aside>

## CLI options

rovr also supports Yazi-style CLI options for direct integration with scripts and other tools:

### `--cwd-file`

Write the current working directory to a specified file when rovr exits:

```sh
rovr --cwd-file /tmp/rovr_cwd
```

After quitting rovr, you can read the final directory from the file:

```bash
# Example usage in bash
rovr --cwd-file /tmp/rovr_cwd
cd "$(cat /tmp/rovr_cwd)"
```

### `--chooser-file`

Write selected files to a specified file when rovr exits:

```sh
rovr --chooser-file /tmp/rovr_selected
```

This writes the paths of any files you have selected (using visual mode or other selection methods) to the specified file, one per line.

```bash
# Example: process selected files
rovr --chooser-file /tmp/rovr_selected
while IFS= read -r file; do
    echo "Selected: $file"
done < /tmp/rovr_selected
```

### Combined usage

You can use both options together:

```sh
rovr --cwd-file /tmp/rovr_cwd --chooser-file /tmp/rovr_selected
```

<Aside type="tip">
  these CLI options take priority over the `cd_on_quit` configuration setting,
  ensuring backward compatibility while providing flexible integration options.
</Aside>
